\documentclass{article}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{biblatex}
\renewcommand{\baselinestretch}{1.25}

\addbibresource{Stopeight_Analyzer.bib}
\iffalse
\bibliography{Stopeight_Analyzer}{}
\bibliographystyle{plain}
\fi

\begin{document}
\title{Stopeight Analyzer}
\author{Fassio Blatter}
\maketitle

\section{Introduction}

The algorithm in this text has been developed during the years 2009 to 2016 by Specific Purpose Software GmbH. It is now open sourced, but mostly exists in the form of code fragments.\\
This file is in the Stopeight repository on Github. Please edit here:\\
\href{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight_Analyzer.tex}{https://github.com/specpose/stopeight/tree/master/doc/latex/Stopeight\_Analyzer.tex}
A brief overview can be found here:\\
\href{https://www.stopeight.com/dev_analyzer.html}{https://www.stopeight.com/dev\_analyzer.html}\\\\
The Arcs $A \subset \mathbb{R}^2$ are an approximation of a set$\footnote{Midpoints have to be formally included for insertion only}$ $X \subset \mathbb{R}^2$:
\begin{align}
f \circ g: X \rightarrow A
\end{align}
\begin{equation*}
1 < card(X) < \infty
\end{equation*}
via the intermediate functions $f,g$ where the intermediate transversality $Y = X \cap A$ defines Arcs $U_{m}$. ~\cite[\nopp 9.9]{Loring} ($f \circ g$ is neither injective nor surjective) ~\cite[\nopp 2.1]{LauresSzymik}:
\begin{align}
f: X \rightarrow Y; g: Y \rightarrow A
\end{align}
Note: The set of Arcs A is a dim 1-manifold. In $A$ we can find a system of open sets. The set of charts $\{U_{m}\}$ covering the whole manifold $A$ is an atlas. ~\cite[\nopp 3.1.1.]{Fomenko} ~\cite[\nopp 4.5]{Wall} ($X$ is formally a discrete / dim 0-manifold)
\begin{align}
A = \cup_{m}U_{m}; (X = \cup_{n}V_{n})\\
Y: \text{0-submanifold} \Rightarrow dim(X)=0<codim(Y)=1 \Rightarrow X \text{ disjoint } A
\end{align}
\iffalse
Within $f$ we are assigning a sequence of three points to compact Hausdorf invervals ~\cite[\nopp 6.1.3.]{Mortad}:
\begin{equation}
\{x_{n}\}_{n \in \mathbb{N}} \mapsto \{S,C,E\}
\end{equation}\\
\fi
The approximation aims to find the maximal smooth atlas. Each chart $U_{m}$ has a start of Turn $T \ni S = \inf_{U_{m}}$, a Corner $C \in U_{m}$ and an end of Turn $T \ni E = \sup_{U_{m}}$. This format has the benefit of reducing the amount of data for $Computation$ (see Stopeight Comparator), while preserving the $Representation$ using quadratic bezier splines. ($U_{m}$ closed?)

\section{Representation}

The affine transformations $q$ are functions that map to control points $Q \subset \mathbb{R}^2$:
\begin{align}
q: S \times C \times E \rightarrow Q\\
Q \cap X = 0; Q \cap Y = 0
\end{align}
The combination $M = Y \cup Q$ has parts from the original $X$'s, and constructed $Q$'s that are not in $A$ $\footnote{insertion: $C \notin X$, otherwise: $C \in X \cap A$}$:
\begin{align*}
S,C,E \in X; Q \setminus A=\{q_{1}(S,C,E),q_{3}(S,C,E),q_{4}(S,C,E),q_{6}(S,C,E)\}
\end{align*}
and is composed of four quadratic bezier splines $\gamma_{H}(t)$:
\begin{align}
\gamma_{H}: \mathbb{R} \rightarrow \mathbb{R}^2; t \mapsto (x,y)
\end{align}
with control point sets $\{H_{1},...,H_{4}\}$ per chart of M. The Arc segment defining function $\kappa$ forms the planar coordinates $(x',y')$ of Arc $U_{m}$:
\begin{equation}
\kappa: \mathbb{R} \rightarrow A; t \mapsto (x,y)
\end{equation}
\begin{align*}
\kappa(t) =
\begin{cases}
\gamma_{H_{1}}(t); H_{1}=\{S,q_{1}(S,C,E),q_{2}(S,C,E)\} & t \in [0,\frac{1}{4}]\\
\gamma_{H_{2}}(t); H_{2}=\{q_{2}(S,C,E),q_{3}(S,C,E),C\} & t \in [\frac{1}{4},\frac{1}{2}]\\
\gamma_{H_{3}}(t); H_{3}=\{C,q_{4}(S,C,E),q_{5}(S,C,E)\} & t \in [\frac{1}{2},\frac{3}{4}]\\
\gamma_{H_{3}}(t); H_{4}=\{q_{5}(S,C,E),q_{6}(S,C,E),E\} & t \in [\frac{3}{4},1]
\end{cases}
\end{align*}
Note: The continuous function $\kappa$ makes the topological space $A$ path-connected. Therefore it is a $path$ from $U_{m}$ to $U_{m+1}$ and intersects at least once at the unilateral limit $S \cap E$. ($dim (U_{m} \cup U_{m+1}) \geq 1?)$. ~\cite[\nopp 6.1.3.]{Mortad}\\\\
In order to compare the length from $[a,b] \subseteq A$ with $[a.b] \subseteq X$, we have to connect all $P_{n}, P_{n+1} \in X$ with one linear bezier spline each, because $X$ is discrete:
\begin{align}
\iota: \mathbb{R} \rightarrow B; t \mapsto (x,y)\\
\iota(t) = \{ \gamma_{H}(t)\lvert H=\{P_{n},P_{n}+\frac{(P_{n+1}-P_{n})}{2},P_{n+1}\}\}\\
dim(B)=1<codim(Y)=1 \Rightarrow B \text{ joint } A
\end{align}
Note: For both $B$ and $A$, the length of the curve is now independent of the choice of parameter on the curve. ~\cite[\nopp 1.1]{Taimanov}\\\\
The arc-length metric $d(a,b)$ turns both manifolds $A$ and $B$ into metric spaces $(A,d)$ and $(B,d)$. ($\frac{d}{dt}$: total derivative?)
\begin{equation}
d(a,b) = \int \limits _{a}^{b}\lvert \frac{\mathrm{d}}{\mathrm{d}t}\gamma(t)\rvert \mathrm{d}t
\end{equation}
We can now establish an injective $link$ between elements of $B$ and $A$. ($X \rightarrow A$ is injective, $but$ $A \rightarrow X$ is not accurate):
\begin{equation}
link: B \rightarrow A, (x,y) \mapsto (x',y'); link^{-1}: A \rightarrow B, (x',y') \mapsto (x,y)
\end{equation}
\section{Computation}

\subsection{Auxiliary Functions}

Auxiliary functions are functions of the form $[a,b] \rightarrow \mathbb{R}$ that can be applied to any segment $[a,b] \subseteq (B,d),(A,d)$ with certain preliminary constraints.

\subsubsection{Straightness}
A straight line segment is determined by a straightness measure. (vector space?)\\
\begin{align}
straightness([a,b])=\frac{\int \limits _{[a,b] \subseteq A}\lvert\gamma(t)\rvert\mathrm{d}t}{\int \limits _{[a,b] \subseteq B}\lvert\gamma(t)\rvert\mathrm{d}t}
\end{align}
A threshold can be chosen, which makes the segment straight or bent in A.\\
It is closely related to the curvature measure.

\subsubsection{Area}
The integral of the area under the transformed arc curve function $transform(\kappa) = \kappa'$, so that:
\begin{align}
\kappa'_{y}(a), \kappa'_{y}(b) = 0\\
area([a,b])= \int \limits _{\kappa'_{x}(a)}^{\kappa'_{x}(b)} \kappa'_{y}(t)\mathrm{d}t
\end{align}

\subsubsection{Curvature}
Curvature is determined by the ratio of Area to Diameter.
\begin{equation}
curvature([a,b]) = \frac{area([a,b])}{\sqrt{(\kappa_{x}(b) - \kappa_{x}(a))^2+(\kappa_{y}(b) - \kappa_{y}(a))^2}}
\end{equation}

\subsection{Affine Transformation}
An affine transformation $A$ of a parametrised curve $\gamma_{H}$ with control points $\{h_{1},h_{2},h_{3}\} = H$ and parameter $t$:
\begin{equation}
transform(\gamma):
\begin{bmatrix}
1 & t & t^2
\end{bmatrix}
\underbrace{\begin{bmatrix}
1 & 0 & 0\\
-2 & 2 & 0\\
1 & -2 &1
\end{bmatrix}}_{Coefficients}
\begin{bmatrix}
Ah_{1} & Ah_{2} & Ah_{3}
\end{bmatrix}
=
\begin{bmatrix}
h_{1}' & h_{2}' & h_{3}'
\end{bmatrix}
\end{equation}
The composite $transform(\kappa)$ is based on parameter $t$ and $h_{1} \in S \subset U_{m};h_{2} \in C \subset U_{m}; h_{3} \in E \subset U_{m}$.

\subsection{Cliff}
A maximal curvature is determined, so that under any linear transformation of any segment, curvature is no more than $(x')^2 + (y')^2 <=1$
A single cliff can have no more than the maximum curvature.

\subsection{Spiral}
An even number of cliffs is found under the curvature criteria.
The cliffs are then centered.


\iffalse
\begin{equation} 
\forall u,v \in V :
d(u,v) = 
\begin{cases}
0,  u=v \\
1,  u \neq v 
\end{cases}
\end{equation}
\fi

\printbibliography

\end{document}